SPECIFICATION Spec
CONSTANT defaultInitValue = defaultInitValue

CONSTANT MaxHeight = 5
CONSTANT Sigma = 3

CONSTANT Miners = {"Miner1"}
CONSTANT Validators = {"FinalityValidator1", "FinalityValidator2"}

CONSTANT L = 4

VoteThreshold = 2

\* Invariant: finalizedHeight is the height of a block that is finalized, and no higher block is marked final.
INVARIANT Invariant_FinalizedHeightConsistent
\* Invariant: all blocks up to finalizedHeight are finalized (no gap in final prefix).
INVARIANT Invariant_ContiguousFinality
\* Invariant: context_bft is non-decreasing along the chain (no block has context lower than its parent).
INVARIANT Invariant_ContextMonotonic

\* Stalled mode invariant: the stalled flag correctly reflects the chain gap
INVARIANT Invariant_StalledCorrect
\* Progress requirement: to avoid deadlock, L must not be smaller than Sigma
INVARIANT Invariant_LNonDeadlock
\* 
INVARIANT Invariant_VoteThresholdBound