SPECIFICATION Spec
CONSTANT defaultInitValue = defaultInitValue

CONSTANT MaxHeight = 2
CONSTANT Sigma = 1

CONSTANT Miners = {"Miner1"}
CONSTANT Validators = {"FinalityValidator1", "FinalityValidator2"}

CONSTANT L = 4

VoteThreshold = 1

\* Invariant: finalizedHeight is the height of a block that is finalized, and no higher block is marked final.
INVARIANT FinalizedHeightConsistent
\* Invariant: all blocks up to finalizedHeight are finalized (no gap in final prefix).
INVARIANT ContiguousFinality
\* Invariant: context_bft is non-decreasing along the chain (no block has context lower than its parent).
INVARIANT ContextMonotonic
\* Stalled mode invariant: the stalled flag correctly reflects the chain gap
INVARIANT StalledCorrect
\* Progress requirement: to avoid deadlock, L must not be smaller than Sigma
INVARIANT LNonDeadlock
\* You canâ€™t require more votes than there are validators
INVARIANT VoteThresholdBound
\* Every time votingHeight = 0, the map must be fully reset
INVARIANT VoteMapReset
\* No one may vote unless a round is in progress
INVARIANT VotesOnlyDuringVoting
